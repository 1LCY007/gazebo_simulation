<launch>
    <!-- pointCloud2 to Laserscan -->
    <!--<include file="$(find unitree_move_base)/launch/pointCloud2LaserScan.launch"/>-->
    <!-- 设置AMCL初始位置，与Gazebo中机器人的初始位置一致 -->



    <!-- rviz -->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find unitree_move_base)/worlds/hospital.rviz"/>

    <arg name="map" default="$(find unitree_move_base)/maps/hospital.yaml" />
    <node name="map_server" pkg="map_server" type="map_server" args="$(arg map)"/>

    <include file="$(find unitree_move_base)/launch/go2_amcl.launch">
    </include>
    <!-- Gazebo真值 -> /initialpose -->
    <node pkg="unitree_move_base" type="init_pose.py" name="init_pose" output="screen">
        <!-- 这里填 /gazebo/model_states 里的模型名 -->
        <param name="model_name" value="go2_gazebo"/>
        <param name="initialpose_topic" value="/initialpose"/>
        <param name="frame_id" value="map"/>

        <!-- 起立完成后再取真值并发布；改成你的起立耗时 -->
        <param name="delay" value="3.0"/>

        <!-- 多发几次确保AMCL接到 -->
        <param name="repeat" value="3"/>
        <param name="repeat_dt" value="0.1"/>
    </node>

    <!-- move_base -->
    <include file="$(find unitree_move_base)/launch/move_base.launch"/>

</launch>